<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.4.0 -->
    <script>window.materialVersion = "1.4.0"</script>

    <!-- Title -->
    
    <title>
        
            9、2D游戏编程技巧 | 
        
        柒夜
    </title>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    
    
    
    
    

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="柒夜">
    <meta name="description" itemprop="description" content="摘要2D游戏编程技巧">
    <meta name="keywords" content="null,游戏框架">

    <!-- Site Verification -->
    
    

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="柒夜">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="9、2D游戏编程技巧 | 柒夜">
    <meta property="og:image" content="/img/favicon.png" />
    <meta property="og:description" content="摘要2D游戏编程技巧">
    <meta property="og:article:tag" content="游戏框架"> 

    
        <meta property="article:published_time" content="Sun Sep 13 2015 23:50:57 GMT+0800" />
        <meta property="article:modified_time" content="Sun Jul 02 2017 01:48:44 GMT+0800" />
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="9、2D游戏编程技巧 | 柒夜">
    <meta name="twitter:description" content="摘要2D游戏编程技巧">
    <meta name="twitter:image" content="/img/favicon.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="http://yoursite.com" />

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2015/09/13/Game Frame/9、2D游戏编程技巧/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "柒夜",
        "logo": "/img/favicon.png"
    },
    "author": {
        "@type": "Person",
        "name": "柒夜",
        "image": {
            "@type": "ImageObject",
            "url": "/img/favicon.png"
        },
        "description": "暗夜之虫 会集光中"
    },
    "headline": "9、2D游戏编程技巧",
    "url": "http://yoursite.com/2015/09/13/Game Frame/9、2D游戏编程技巧/index.html",
    "datePublished": "Sun Sep 13 2015 23:50:57 GMT+0800",
    "dateModified": "Sun Jul 02 2017 01:48:44 GMT+0800",
    "description": "摘要2D游戏编程技巧",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://yoursite.com"
    }
}
</script>


    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+materialVersion+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(data&&data.indexOf(versionString)===-1){lsloader.removeLS(key)}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload){cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}code=code.split(versionString)[1];if(/\.js?.+$/.test(versionNumber)){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload)}};lsloader.requestResource=function(name,path,cssonload){var that=this;if(/\.js?.+$/.test(path)){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else if(/\.css?.+$/.test(path)){this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import CSS & jQuery -->
    
        <style id="css/material.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/material.min.css","/css/material.min.css?fJTiM/K1J3dWIruo3pxtAw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        <style id="css/style.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/style.min.css","/css/style.min.css?oCSEO3ST+aEypEwttTDI9g==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        
        
            <style>
    
    
    
    
    
    
    
    
    
    
    
</style>

        
        <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">


        <script>lsloader.load("js/jquery.min.js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==")</script>
    
    
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Analytics -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    
    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#摘要"><span class="post-toc-number">1.</span> <span class="post-toc-text">摘要</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#向量"><span class="post-toc-number">2.</span> <span class="post-toc-text">向量</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#Vector2类的简单示例：CannonTest类"><span class="post-toc-number">3.</span> <span class="post-toc-text">Vector2类的简单示例：CannonTest类</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#游戏中的物理定律"><span class="post-toc-number">4.</span> <span class="post-toc-text">游戏中的物理定律</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#运动的实现"><span class="post-toc-number">5.</span> <span class="post-toc-text">运动的实现</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#游戏对象的属性"><span class="post-toc-number">6.</span> <span class="post-toc-text">游戏对象的属性</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#窄阶段检测"><span class="post-toc-number">6.1.</span> <span class="post-toc-text">窄阶段检测</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#宽阶段检测"><span class="post-toc-number">6.2.</span> <span class="post-toc-text">宽阶段检测</span></a></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#一个示例"><span class="post-toc-number">7.</span> <span class="post-toc-text">一个示例</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#示例进行碰撞检测CollisionTest类"><span class="post-toc-number">8.</span> <span class="post-toc-text">示例进行碰撞检测CollisionTest类</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2D照相机"><span class="post-toc-number">9.</span> <span class="post-toc-text">2D照相机</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#纹理图集"><span class="post-toc-number">10.</span> <span class="post-toc-text">纹理图集</span></a></li></ol>
        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>
    





<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 24 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                9、2D游戏编程技巧
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/touxiang.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>柒夜</strong>
        <span>9月 13, 2015</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/游戏框架/">游戏框架</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=9、2D游戏编程技巧&url=http://yoursite.com/2015/09/13/Game Frame/9、2D游戏编程技巧/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=柒夜&title=9、2D游戏编程技巧&summary=从零开始&pics=http://yoursite.com/img/favicon.png&url=http://yoursite.com/2015/09/13/Game Frame/9、2D游戏编程技巧/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>2D游戏编程技巧<br><a id="more"></a></p>
<h2 id="向量"><a href="#向量" class="headerlink" title="向量"></a>向量</h2><p>向量有多种解释：位置，速度和加速度，方向和距离。向量相加(a.x+b.x,a.y+b.y)，向量相减(a.x-b.x，a.y-b.y)，但是减法总是用终点位置减去起点位置。向量相乘（a.x<em>scale，a.y</em>scale）。向量的长度计算sqrt(a.x<em>a.x+a.y</em>a.y)。</p>
<p>下面实现一个向量类，实现构造以及加，减，乘，计算距离等等运算。</p>
<pre><code>public class Vector2 {
    public static float TO_RADIANS = (1 / 180.0f) * (float) Math.PI;
    public static float TO_DEGREES = (1 / (float) Math.PI) * 180;
    public float x, y;

    public Vector2() {
    }

    public Vector2(float x, float y) {
        this.x = x;
        this.y = y;
    }

    public Vector2(Vector2 other) {
        this.x = other.x;
        this.y = other.y;
    }

    public Vector2 cpy() {
        return new Vector2(x, y);
    }

    public Vector2 set(float x, float y) {
        this.x = x;
        this.y = y;
        return this;
    }

    public Vector2 set(Vector2 other) {
        this.x = other.x;
        this.y = other.y;
        return this;
    }

    public Vector2 add(float x, float y) {
        this.x += x;
        this.y += y;
        return this;
    }

    public Vector2 add(Vector2 other) {
        this.x += other.x;
        this.y += other.y;
        return this;
    }

    public Vector2 sub(float x, float y) {
        this.x -= x;
        this.y -= y;
        return this;
    }

    public Vector2 sub(Vector2 other) {
        this.x -= other.x;
        this.y -= other.y;
        return this;
    }

    public Vector2 mul(float scalar) {
        this.x *= scalar;
        this.y *= scalar;
        return this;
    }

    public float len() {
        return FloatMath.sqrt(x * x + y * y);
    }

    public Vector2 nor() {
        float len = len();
        if (len != 0) {
            this.x /= len;
            this.y /= len;
        }
        return this;
    }

    public float angle() {
        float angle = (float) Math.atan2(y, x) * TO_DEGREES;
        if (angle &lt; 0)
            angle += 360;
        return angle;
    }

    public Vector2 rotate(float angle) {
           float rad = angle * TO_RADIANS;
        float cos = FloatMath.cos(rad);
        float sin = FloatMath.sin(rad);

        float newX = this.x * cos - this.y * sin;
        float newY = this.x * sin + this.y * cos;

        this.x = newX;
        this.y = newY;

        return this;
    }

    public float dist(Vector2 other) {
        float distX = this.x - other.x;
        float distY = this.y - other.y;
        return FloatMath.sqrt(distX * distX + distY * distY);
    }

    public float dist(float x, float y) {
        float distX = this.x - x;
        float distY = this.y - y;
        return FloatMath.sqrt(distX * distX + distY * distY);
    }

    public float distSquared(Vector2 other) {
        float distX = this.x - other.x;
        float distY = this.y - other.y;        
        return distX*distX + distY*distY;
    }   

    public float distSquared(float x, float y) {
        float distX = this.x - x;
        float distY = this.y - y;        
        return distX*distX + distY*distY;
    }   
}
</code></pre><h2 id="Vector2类的简单示例：CannonTest类"><a href="#Vector2类的简单示例：CannonTest类" class="headerlink" title="Vector2类的简单示例：CannonTest类"></a>Vector2类的简单示例：CannonTest类</h2><pre><code>public class CannonTest extends GLGame {
    public Screen getStartScreen() {
        return new CannonScreen(this);
    }

    class CannonScreen extends Screen {
        float FRUSTUM_WIDTH = 4.8f;
        float FRUSTUM_HEIGHT = 3.2f;
        GLGraphics glGraphics;
        Vertices vertices;
        Vector2 cannonPos = new Vector2(2.4f, 0.5f);
        float cannonAngle = 0;
        Vector2 touchPos = new Vector2();

        public CannonScreen(Game game) {
            super(game);
            glGraphics = ((GLGame) game).getGLGraphics();
            vertices = new Vertices(glGraphics, 3, 0, false, false);
            vertices.setVertices(new float[] { -0.5f, -0.5f, 
                                            0.5f, 0.0f, 
                                               -0.5f, 0.5f }, 0, 6);
        }

        @Override
        public void update(float deltaTime) {
            List&lt;TouchEvent&gt; touchEvents = game.getInput().getTouchEvents();
            game.getInput().getKeyEvents();

            int len = touchEvents.size();
            for (int i = 0; i &lt; len; i++) {
                TouchEvent event = touchEvents.get(i);
                touchPos.x = (event.x / (float) glGraphics.getWidth()) * FRUSTUM_WIDTH;
                touchPos.y = (1 - event.y / (float) glGraphics.getHeight()) * FRUSTUM_HEIGHT;
                cannonAngle = touchPos.sub(cannonPos).angle();
            }
        }

        @Override
        public void present(float deltaTime) {
            GL10 gl = glGraphics.getGL();
            gl.glViewport(0, 0, glGraphics.getWidth(), glGraphics.getHeight());
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
            gl.glMatrixMode(GL10.GL_PROJECTION);
            gl.glLoadIdentity();
            gl.glOrthof(0, FRUSTUM_WIDTH, 0, FRUSTUM_HEIGHT, 1, -1);
            gl.glMatrixMode(GL10.GL_MODELVIEW);
            gl.glLoadIdentity();

            gl.glTranslatef(cannonPos.x, cannonPos.y, 0);
            gl.glRotatef(cannonAngle, 0, 0, 1);
            vertices.bind();
            vertices.draw(GL10.GL_TRIANGLES, 0, 3);
            vertices.unbind();
        }

        @Override
        public void pause() {

        }

        @Override
        public void resume() {

        }

        @Override
        public void dispose() {

        }
    }
}
</code></pre><h2 id="游戏中的物理定律"><a href="#游戏中的物理定律" class="headerlink" title="游戏中的物理定律"></a>游戏中的物理定律</h2><p><strong>质点的运动定律</strong></p>
<p>关注对象的三个属性：位置，速度，加速度。在循环中先使用加速度乘以时间差来更新速度，然后使用速度乘以时间差来更新位置。下面一个例子来说明：</p>
<pre><code>Vector2 position = new Vector2();
Vector2 velocity = new Vector2();
Vector2 acceleration = new Vector2(0,-10);
while(simulationRuns){
    float deltaTime=getDeltaTime();
    if(velocity.len()&lt;55.5){
        velocity.add(acceleration.x*deltaTime,acceleration.y*deltaTime);
    }
    position.add(velocity.x*deltaTime,velocity.y*deltaTime);
}
</code></pre><p><strong>力和质量</strong></p>
<p>总的规律是力=质量*加速度，加速度=力/质量，前面的acceleration为（0，-10），实际上就是地球的重力加速度约值，可以设定为-9.8f。自由落体会有一个最大速度或最终速度。大约为55.5米/秒。</p>
<h2 id="运动的实现"><a href="#运动的实现" class="headerlink" title="运动的实现"></a>运动的实现</h2><p>对CannonTest进行扩展，使其可以发射炮弹。</p>
<ul>
<li>用户的手指在屏幕上拖拽时，三角炮跟踪，确定发射炮弹的角度。</li>
<li>一旦触摸离开，发射炮弹，初始速率等于三角炮和触摸点间的距离。只要没有新的触摸离开事件，炮弹将一直飞。</li>
<li>使视锥体扩大两倍，使其从（0，0）到（9.6，6.4），三角炮的位置在（0，0）</li>
<li>炮弹是0.2米*0.2米的红色矩形。</li>
</ul>
<p>使用一个CannonGravityScreen类：</p>
<pre><code>public class CannonGravityTest extends GLGame {
    public Screen getStartScreen() {
        return new CannonGravityScreen(this);
    }

    class CannonGravityScreen extends Screen {
        float FRUSTUM_WIDTH = 9.6f;
        float FRUSTUM_HEIGHT = 6.4f;
        GLGraphics glGraphics;
        Vertices cannonVertices;
        Vertices ballVertices;
        Vector2 cannonPos = new Vector2();
        float cannonAngle = 0;
        Vector2 touchPos = new Vector2();
        Vector2 ballPos = new Vector2(0, 0);
        Vector2 ballVelocity = new Vector2(0, 0);
        Vector2 gravity = new Vector2(0, -10);

        public CannonGravityScreen(Game game) {
            super(game);
            glGraphics = ((GLGame) game).getGLGraphics();
            cannonVertices = new Vertices(glGraphics, 3, 0, false, false);
            cannonVertices.setVertices(new float[] { -0.5f, -0.5f, 0.5f, 0.0f, -0.5f, 0.5f }, 0, 6);
            ballVertices = new Vertices(glGraphics, 4, 6, false, false);
            ballVertices.setVertices(new float[] { -0.1f, -0.1f, 0.1f, -0.1f, 0.1f, 0.1f, -0.1f, 0.1f }, 0, 8);
            ballVertices.setIndices(new short[] { 0, 1, 2, 2, 3, 0 }, 0, 6);
        }

        @Override
        public void update(float deltaTime) {
            List&lt;TouchEvent&gt; touchEvents = game.getInput().getTouchEvents();
            game.getInput().getKeyEvents();

            int len = touchEvents.size();
            for (int i = 0; i &lt; len; i++) {
                TouchEvent event = touchEvents.get(i);

                touchPos.x = (event.x / (float) glGraphics.getWidth()) * FRUSTUM_WIDTH;
                touchPos.y = (1 - event.y / (float) glGraphics.getHeight()) * FRUSTUM_HEIGHT;
                cannonAngle = touchPos.sub(cannonPos).angle();

                if (event.type == TouchEvent.TOUCH_UP) {
                    float radians = cannonAngle * Vector2.TO_RADIANS;
                    float ballSpeed = touchPos.len();
                    ballPos.set(cannonPos);
                    ballVelocity.x = FloatMath.cos(radians) * ballSpeed;
                    ballVelocity.y = FloatMath.sin(radians) * ballSpeed;
                }
            }

            ballVelocity.add(gravity.x * deltaTime, gravity.y * deltaTime);
            ballPos.add(ballVelocity.x * deltaTime, ballVelocity.y * deltaTime);
        }

        @Override
        public void present(float deltaTime) {

            GL10 gl = glGraphics.getGL();
            gl.glViewport(0, 0, glGraphics.getWidth(), glGraphics.getHeight());
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
            gl.glMatrixMode(GL10.GL_PROJECTION);
            gl.glLoadIdentity();
            gl.glOrthof(0, FRUSTUM_WIDTH, 0, FRUSTUM_HEIGHT, 1, -1);
            gl.glMatrixMode(GL10.GL_MODELVIEW);

            gl.glLoadIdentity();
            gl.glTranslatef(cannonPos.x, cannonPos.y, 0);
            gl.glRotatef(cannonAngle, 0, 0, 1);
            gl.glColor4f(1, 1, 1, 1);
            cannonVertices.bind();
            cannonVertices.draw(GL10.GL_TRIANGLES, 0, 3);
            cannonVertices.unbind();

            gl.glLoadIdentity();
            gl.glTranslatef(ballPos.x, ballPos.y, 0);
            gl.glColor4f(1, 0, 0, 1);
            ballVertices.bind();
            ballVertices.draw(GL10.GL_TRIANGLES, 0, 6);
            ballVertices.unbind();
        }

        @Override
        public void pause() {

        }

        @Override
        public void resume() {

        }

        @Override
        public void dispose() {

        }
    }
}
</code></pre><p>首先把三角炮的发射角度转换成弧度，接着计算三角炮和触摸点之间的距离，这是炮弹的速率，最后计算炮弹的真实速度。根据角度，使用正弦和余弦构造方向向量，把这个方向向量乘以炮弹的速率。</p>
<h2 id="游戏对象的属性"><a href="#游戏对象的属性" class="headerlink" title="游戏对象的属性"></a>游戏对象的属性</h2><p>边界形状：三角网格，轴对齐边界盒，边界圆。</p>
<p>虽然在创建模型空间中为映射后的对象建立边界模型，但实际的边界是独立于对象矩形映射到纹理区域。当创建边界形状时，尽可能使这个边界贴近纹理中的对象的轮廓。对象有如下三个属性：</p>
<ul>
<li>它有位置、方向、尺寸、速度和加速度</li>
<li>它的边界形状（通常在模型空间中围绕着对象的中心进行构造）</li>
<li>它的图像显示</li>
</ul>
<p>这些独立的属性允许使用模型试图控制器模式：</p>
<ul>
<li>在模型方面，对象的物理属性由位置，尺寸，旋转，速度，加速度和边界形状构成。</li>
<li>视图只使用对象的图像表示，也就是定义在模型空间中的两个映射过纹理的三角形。并在世界空间上进行渲染。</li>
<li>控制器负责根据用户输入和力的作用更新对象的物理对象。</li>
</ul>
<p>碰撞检测：宽阶段和窄阶段。宽阶段搜寻可能发生碰撞的对象，窄阶段通过对边界形状进行重叠测试来判断他们是否真的发生碰撞。创建三角网格计算边界计算量最大和最繁琐，因此通常使用边界矩形和边界圆。</p>
<p><strong>圆的Circle类</strong></p>
<pre><code>public class Circle {
    public final Vector2 center = new Vector2();
    public float radius;

    public Circle(float x, float y, float radius) {
        this.center.set(x,y);
           this.radius = radius;
    }
}
</code></pre><p><strong>矩形Rectangle类</strong></p>
<pre><code>public class Rectangle {
    public final Vector2 lowerLeft;
    public float width, height;

    public Rectangle(float x, float y, float width, float height) {
        this.lowerLeft = new Vector2(x,y);
        this.width = width;
        this.height = height;
    }    
}
</code></pre><h3 id="窄阶段检测"><a href="#窄阶段检测" class="headerlink" title="窄阶段检测"></a>窄阶段检测</h3><p><strong>碰撞检测类的示例</strong></p>
<pre><code>public class OverlapTester {
    public static boolean overlapCircles(Circle c1, Circle c2) {
        float distance = c1.center.distSquared(c2.center);
        float radiusSum = c1.radius + c2.radius;
        return distance &lt;= radiusSum * radiusSum;
    }

    public static boolean overlapRectangles(Rectangle r1, Rectangle r2) {
        if(r1.lowerLeft.x &lt; r2.lowerLeft.x + r2.width &amp;&amp; r1.lowerLeft.x + r1.width &gt; r2.lowerLeft.x &amp;&amp; r1.lowerLeft.y &lt; r2.lowerLeft.y + r2.height &amp;&amp; r1.lowerLeft.y + r1.height &gt; r2.lowerLeft.y)
            return true;
        else
            return false;
    }

    public static boolean overlapCircleRectangle(Circle c, Rectangle r) {
        float closestX = c.center.x;
        float closestY = c.center.y;

        if(c.center.x &lt; r.lowerLeft.x) {
            closestX = r.lowerLeft.x; 
        } 
        else if(c.center.x &gt; r.lowerLeft.x + r.width) {
            closestX = r.lowerLeft.x + r.width;
        }

        if(c.center.y &lt; r.lowerLeft.y) {
            closestY = r.lowerLeft.y;
        } 
        else if(c.center.y &gt; r.lowerLeft.y + r.height) {
            closestY = r.lowerLeft.y + r.height;
        }

        return c.center.distSquared(closestX, closestY) &lt; c.radius * c.radius;           
    }

    public static boolean pointInCircle(Circle c, Vector2 p) {
        return c.center.distSquared(p) &lt; c.radius * c.radius;
    }

    public static boolean pointInCircle(Circle c, float x, float y) {
        return c.center.distSquared(x, y) &lt; c.radius * c.radius;
    }

    public static boolean pointInRectangle(Rectangle r, Vector2 p) {
        return r.lowerLeft.x &lt;= p.x &amp;&amp; r.lowerLeft.x + r.width &gt;= p.x &amp;&amp; r.lowerLeft.y &lt;= p.y &amp;&amp; r.lowerLeft.y + r.height &gt;= p.y;
    }

    public static boolean pointInRectangle(Rectangle r, float x, float y) {
        return r.lowerLeft.x &lt;= x &amp;&amp; r.lowerLeft.x + r.width &gt;= x &amp;&amp; r.lowerLeft.y &lt;= y &amp;&amp; r.lowerLeft.y + r.height &gt;= y;
    }
}
</code></pre><h3 id="宽阶段检测"><a href="#宽阶段检测" class="headerlink" title="宽阶段检测"></a>宽阶段检测</h3><p>将画面分为单元格，如果一个对象与其他对象不在一个单元格内，需要做的就是如下工作：</p>
<ul>
<li>根据物理和控制器步骤更新画面中的所有对象。</li>
<li>根据每个对象的位置更新该对象的边界形状和位置，当然也包含该对象的方向和尺寸。</li>
<li>根据每个对象的边界形状寻找包含该对象的一个或几个单元格，并将其添加到这些单元格所包含的对象列表里。</li>
<li>只检测可以发生碰撞并且位于相同单元格的对象对之间的碰撞。</li>
</ul>
<p>这就是空间散列网格宽阶段检测，首先需要定义单元格的大小，这高度依赖游戏世界的规模和所使用的单位。</p>
<h2 id="一个示例"><a href="#一个示例" class="headerlink" title="一个示例"></a>一个示例</h2><p><strong>GameObject类</strong></p>
<p>这是一个静态的对象，游戏中每一个对象都有一个位置，这个位置就是它的中心。</p>
<pre><code>public class GameObject {
    public final Vector2 position;
    public final Rectangle bounds;

    public GameObject(float x, float y, float width, float height) {
        this.position = new Vector2(x,y);
        this.bounds = new Rectangle(x-width/2, y-height/2, width, height);
    }
}
</code></pre><p><strong>DynamicGameObject类</strong></p>
<p>这是一个动态的对象，需要记录它们的速度和加速度。</p>
<pre><code>public class DynamicGameObject extends GameObject {
    public final Vector2 velocity;
    public final Vector2 accel;

    public DynamicGameObject(float x, float y, float width, float height) {
        super(x, y, width, height);
        velocity = new Vector2();
        accel = new Vector2();
    }
}
</code></pre><p><strong>Cannon类</strong></p>
<p>从GameObject派生一个Cannon，并添加一个字段存储炮当前的角度。</p>
<pre><code>public class Cannon extends GameObject {
    public float angle;

    public Cannon(float x, float y, float width, float height) {
        super(x, y, width, height);
        angle = 0;
    }
}
</code></pre><p><strong>空间散列网格实现</strong></p>
<p>我们使用两个单元格列表，一个用来存储动态对象，一个存储静态对象。代码中也保存了每行和每列的单元格，使用它们来判断一个点是否处在画面之中。单元格的大小也需要保存，cellIds保存对象所处的4个单元格ID。</p>
<pre><code>public class SpatialHashGrid {
    List&lt;GameObject&gt;[] dynamicCells;
    List&lt;GameObject&gt;[] staticCells;
    int cellsPerRow;
    int cellsPerCol;
    float cellSize;
    int[] cellIds = new int[4];
    List&lt;GameObject&gt; foundObjects;

    public SpatialHashGrid(float worldWidth, float worldHeight, float cellSize) {
        this.cellSize = cellSize;
        this.cellsPerRow = (int)FloatMath.ceil(worldWidth/cellSize);
        this.cellsPerCol = (int)FloatMath.ceil(worldHeight/cellSize);
        int numCells = cellsPerRow * cellsPerCol;
        dynamicCells = new List[numCells];
        staticCells = new List[numCells];
        for(int i = 0; i &lt; numCells; i++) {
            dynamicCells[i] = new ArrayList&lt;GameObject&gt;(10);
            staticCells[i] = new ArrayList&lt;GameObject&gt;(10);
        }
        foundObjects = new ArrayList&lt;GameObject&gt;(10);
    }

    public void insertStaticObject(GameObject obj) {
        int[] cellIds = getCellIds(obj);
        int i = 0;
        int cellId = -1;
        while(i &lt;= 3 &amp;&amp; (cellId = cellIds[i++]) != -1) {
            staticCells[cellId].add(obj);
        }
    }

    public void insertDynamicObject(GameObject obj) {
        int[] cellIds = getCellIds(obj);
        int i = 0;
        int cellId = -1;
        while(i &lt;= 3 &amp;&amp; (cellId = cellIds[i++]) != -1) {
            dynamicCells[cellId].add(obj);
        }
    }

    public void removeObject(GameObject obj) {
        int[] cellIds = getCellIds(obj);
        int i = 0;
        int cellId = -1;
        while(i &lt;= 3 &amp;&amp; (cellId = cellIds[i++]) != -1) {
            dynamicCells[cellId].remove(obj);
            staticCells[cellId].remove(obj);
        }
    }

    public void clearDynamicCells(GameObject obj) {
        int len = dynamicCells.length;
        for(int i = 0; i &lt; len; i++) {
            dynamicCells[i].clear();
        }
    }   

    public List&lt;GameObject&gt; getPotentialColliders(GameObject obj) {
        foundObjects.clear();
        int[] cellIds = getCellIds(obj);
        int i = 0;
        int cellId = -1;
        while(i &lt;= 3 &amp;&amp; (cellId = cellIds[i++]) != -1) {
            int len = dynamicCells[cellId].size();
            for(int j = 0; j &lt; len; j++) {
                GameObject collider = dynamicCells[cellId].get(j);
                if(!foundObjects.contains(collider))
                    foundObjects.add(collider);
            }

            len = staticCells[cellId].size();
            for(int j = 0; j &lt; len; j++) {
                GameObject collider = staticCells[cellId].get(j);
                if(!foundObjects.contains(collider))
                    foundObjects.add(collider);
            }
        }
        return foundObjects;
    }

    public int[] getCellIds(GameObject obj) {
        int x1 = (int)FloatMath.floor(obj.bounds.lowerLeft.x / cellSize);
        int y1 = (int)FloatMath.floor(obj.bounds.lowerLeft.y / cellSize);
        int x2 = (int)FloatMath.floor((obj.bounds.lowerLeft.x + obj.bounds.width) / cellSize);
        int y2 = (int)FloatMath.floor((obj.bounds.lowerLeft.y + obj.bounds.height) / cellSize);

        if(x1 == x2 &amp;&amp; y1 == y2) {
            if(x1 &gt;= 0 &amp;&amp; x1 &lt; cellsPerRow &amp;&amp; y1 &gt;= 0 &amp;&amp; y1 &lt; cellsPerCol)
                cellIds[0] = x1 + y1 * cellsPerRow;
            else
                cellIds[0] = -1;
            cellIds[1] = -1;
            cellIds[2] = -1;
            cellIds[3] = -1;
        }
        else if(x1 == x2) {
            int i = 0;
            if(x1 &gt;= 0 &amp;&amp; x1 &lt; cellsPerRow) {
                if(y1 &gt;= 0 &amp;&amp; y1 &lt; cellsPerCol)
                    cellIds[i++] = x1 + y1 * cellsPerRow;
                if(y2 &gt;= 0 &amp;&amp; y2 &lt; cellsPerCol)
                    cellIds[i++] = x1 + y2 * cellsPerRow;
            }
            while(i &lt;= 3) cellIds[i++] = -1;
        }
        else if(y1 == y2) {
            int i = 0;
            if(y1 &gt;= 0 &amp;&amp; y1 &lt; cellsPerCol) {
                if(x1 &gt;= 0 &amp;&amp; x1 &lt; cellsPerRow)
                    cellIds[i++] = x1 + y1 * cellsPerRow;
                if(x2 &gt;= 0 &amp;&amp; x2 &lt; cellsPerRow)
                    cellIds[i++] = x2 + y1 * cellsPerRow;
            }
            while(i &lt;= 3) cellIds[i++] = -1;                       
        }
        else {
            int i = 0;
            int y1CellsPerRow = y1 * cellsPerRow;
            int y2CellsPerRow = y2 * cellsPerRow;
            if(x1 &gt;= 0 &amp;&amp; x1 &lt; cellsPerRow &amp;&amp; y1 &gt;= 0 &amp;&amp; y1 &lt; cellsPerCol)
                cellIds[i++] = x1 + y1CellsPerRow;
            if(x2 &gt;= 0 &amp;&amp; x2 &lt; cellsPerRow &amp;&amp; y1 &gt;= 0 &amp;&amp; y1 &lt; cellsPerCol)
                cellIds[i++] = x2 + y1CellsPerRow;
            if(x2 &gt;= 0 &amp;&amp; x2 &lt; cellsPerRow &amp;&amp; y2 &gt;= 0 &amp;&amp; y2 &lt; cellsPerCol)
                cellIds[i++] = x2 + y2CellsPerRow;
            if(x1 &gt;= 0 &amp;&amp; x1 &lt; cellsPerRow &amp;&amp; y2 &gt;= 0 &amp;&amp; y2 &lt; cellsPerCol)
                cellIds[i++] = x1 + y2CellsPerRow;CannonGravityTest
            while(i &lt;= 3) cellIds[i++] = -1;
        }
        return cellIds;
    }
}
</code></pre><h2 id="示例进行碰撞检测CollisionTest类"><a href="#示例进行碰撞检测CollisionTest类" class="headerlink" title="示例进行碰撞检测CollisionTest类"></a>示例进行碰撞检测CollisionTest类</h2><pre><code>public class CollisionTest extends GLGame {

    public Screen getStartScreen() {
        return new CollisionScreen(this);
    }

    class CollisionScreen extends Screen {
        final int NUM_TARGETS = 20;
        final float WORLD_WIDTH = 9.6f;
        final float WORLD_HEIGHT = 4.8f;
        GLGraphics glGraphics;
        Cannon cannon;
        DynamicGameObject ball;
        List&lt;GameObject&gt; targets;
        SpatialHashGrid grid;

        Vertices cannonVertices;
        Vertices ballVertices;
        Vertices targetVertices;

        Vector2 touchPos = new Vector2();
        Vector2 gravity = new Vector2(0, -10);

        public CollisionScreen(Game game) {
            super(game);
            glGraphics = ((GLGame) game).getGLGraphics();

            cannon = new Cannon(0, 0, 1, 1);
            ball = new DynamicGameObject(0, 0, 0.2f, 0.2f);
            targets = new ArrayList&lt;GameObject&gt;(NUM_TARGETS);
            grid = new SpatialHashGrid(WORLD_WIDTH, WORLD_HEIGHT, 2.5f);
            for (int i = 0; i &lt; NUM_TARGETS; i++) {
                GameObject target = new GameObject((float) Math.random() * WORLD_WIDTH, (float) Math.random() * WORLD_HEIGHT, 0.5f, 0.5f);
                grid.insertStaticObject(target);
                targets.add(target);
            }

            cannonVertices = new Vertices(glGraphics, 3, 0, false, false);
            cannonVertices.setVertices(new float[] { -0.5f, -0.5f, 0.5f, 0.0f, -0.5f, 0.5f }, 0, 6);

            ballVertices = new Vertices(glGraphics, 4, 6, false, false);
            ballVertices.setVertices(new float[] { -0.1f, -0.1f, 0.1f, -0.1f, 0.1f, 0.1f, -0.1f, 0.1f }, 0, 8);
            ballVertices.setIndices(new short[] { 0, 1, 2, 2, 3, 0 }, 0, 6);

            targetVertices = new Vertices(glGraphics, 4, 6, false, false);
            targetVertices.setVertices(new float[] { -0.25f, -0.25f, 0.25f, -0.25f, 0.25f, 0.25f, -0.25f, 0.25f }, 0, 8);
            targetVertices.setIndices(new short[] { 0, 1, 2, 2, 3, 0 }, 0, 6);
        }

        public void update(float deltaTime) {
            List&lt;TouchEvent&gt; touchEvents = game.getInput().getTouchEvents();
            game.getInput().getKeyEvents();

            int len = touchEvents.size();
            for (int i = 0; i &lt; len; i++) {
                TouchEvent event = touchEvents.get(i);

                touchPos.x = (event.x / (float) glGraphics.getWidth()) * WORLD_WIDTH;
                touchPos.y = (1 - event.y / (float) glGraphics.getHeight()) * WORLD_HEIGHT;

                cannon.angle = touchPos.sub(cannon.position).angle();

                if (event.type == TouchEvent.TOUCH_UP) {
                    float radians = cannon.angle * Vector2.TO_RADIANS;
                    float ballSpeed = touchPos.len() * 2;
                    ball.position.set(cannon.position);
                    ball.velocity.x = FloatMath.cos(radians) * ballSpeed;
                    ball.velocity.y = FloatMath.sin(radians) * ballSpeed;
                    ball.bounds.lowerLeft.set(ball.position.x - 0.1f, ball.position.y - 0.1f);
                }
            }

            ball.velocity.add(gravity.x * deltaTime, gravity.y * deltaTime);
            ball.position.add(ball.velocity.x * deltaTime, ball.velocity.y * deltaTime);
            ball.bounds.lowerLeft.add(ball.velocity.x * deltaTime, ball.velocity.y * deltaTime);

            List&lt;GameObject&gt; colliders = grid.getPotentialColliders(ball);
            len = colliders.size();
            for (int i = 0; i &lt; len; i++) {
                GameObject collider = colliders.get(i);
                if (OverlapTester.overlapRectangles(ball.bounds, collider.bounds)) {
                    grid.removeObject(collider);
                    targets.remove(collider);
                }
            }
        }

        public void present(float deltaTime) {
            GL10 gl = glGraphics.getGL();
            gl.glViewport(0, 0, glGraphics.getWidth(), glGraphics.getHeight());
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
            gl.glMatrixMode(GL10.GL_PROJECTION);
            gl.glLoadIdentity();
            gl.glOrthof(0, WORLD_WIDTH, 0, WORLD_HEIGHT, 1, -1);
            gl.glMatrixMode(GL10.GL_MODELVIEW);

            gl.glColor4f(0, 1, 0, 1);
            targetVertices.bind();
            int len = targets.size();
            for (int i = 0; i &lt; len; i++) {
                GameObject target = targets.get(i);
                gl.glLoadIdentity();
                gl.glTranslatef(target.position.x, target.position.y, 0);
                targetVertices.draw(GL10.GL_TRIANGLES, 0, 6);
            }
            targetVertices.unbind();

            gl.glLoadIdentity();
            gl.glTranslatef(ball.position.x, ball.position.y, 0);
            gl.glColor4f(1, 0, 0, 1);
            ballVertices.bind();
            ballVertices.draw(GL10.GL_TRIANGLES, 0, 6);
            ballVertices.unbind();

            gl.glLoadIdentity();
            gl.glTranslatef(cannon.position.x, cannon.position.y, 0);
            gl.glRotatef(cannon.angle, 0, 0, 1);
            gl.glColor4f(1, 1, 1, 1);
            cannonVertices.bind();
            cannonVertices.draw(GL10.GL_TRIANGLES, 0, 3);
            cannonVertices.unbind();
        }

        @Override
        public void pause() {
        }

        @Override
        public void resume() {
        }

        @Override
        public void dispose() {
        }
    }
}
</code></pre><h2 id="2D照相机"><a href="#2D照相机" class="headerlink" title="2D照相机"></a>2D照相机</h2><p>实际上可以在空间中任意移动视锥，可以很容易指定左下角的位置。也可以将视锥的中心定位，可以容易的定位到特定的位置的对象上。下面是Camera2D类的代码：</p>
<pre><code>public class Camera2D {
    public final Vector2 position;
    public float zoom;
    public final float frustumWidth;
    public final float frustumHeight;
    final GLGraphics glGraphics;

    public Camera2D(GLGraphics glGraphics, float frustumWidth, float frustumHeight) {
        this.glGraphics = glGraphics;
        this.frustumWidth = frustumWidth;
        this.frustumHeight = frustumHeight;
        this.position = new Vector2(frustumWidth / 2, frustumHeight / 2);
        this.zoom = 1.0f;
    }

    public void setViewportAndMatrices() {
        GL10 gl = glGraphics.getGL();
        gl.glViewport(0, 0, glGraphics.getWidth(), glGraphics.getHeight());
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();
        gl.glOrthof(position.x - frustumWidth * zoom / 2, 
                position.x + frustumWidth * zoom/ 2, 
                position.y - frustumHeight * zoom / 2, 
                position.y + frustumHeight * zoom/ 2, 
                1, -1);
        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
    }

    public void touchToWorld(Vector2 touch) {
        touch.x = (touch.x / (float) glGraphics.getWidth()) * frustumWidth * zoom;
        touch.y = (1 - touch.y / (float) glGraphics.getHeight()) * frustumHeight * zoom;
        touch.add(position).sub(frustumWidth * zoom / 2, frustumHeight * zoom / 2);
    }
}
</code></pre><p><strong>测试的实例Camera2DTest类</strong></p>
<p>这个示例的作用是让照相机跟踪炮弹。</p>
<pre><code>public class Camera2DTest extends GLGame {

    public Screen getStartScreen() {
        return new Camera2DScreen(this);
    }

    class Camera2DScreen extends Screen {
        final int NUM_TARGETS = 20;
        final float WORLD_WIDTH = 9.6f;
        final float WORLD_HEIGHT = 4.8f;
        GLGraphics glGraphics;
        Cannon cannon;
        DynamicGameObject ball;
        List&lt;GameObject&gt; targets;
        SpatialHashGrid grid;

        Vertices cannonVertices;
        Vertices ballVertices;
        Vertices targetVertices;

        Vector2 touchPos = new Vector2();
        Vector2 gravity = new Vector2(0, -10);

        Camera2D camera;

        public Camera2DScreen(Game game) {
            super(game);
            glGraphics = ((GLGame) game).getGLGraphics();

            cannon = new Cannon(0, 0, 1, 1);
            ball = new DynamicGameObject(0, 0, 0.2f, 0.2f);
            targets = new ArrayList&lt;GameObject&gt;(NUM_TARGETS);
            grid = new SpatialHashGrid(WORLD_WIDTH, WORLD_HEIGHT, 2.5f);
            for (int i = 0; i &lt; NUM_TARGETS; i++) {
                GameObject target = new GameObject((float) Math.random() * WORLD_WIDTH, (float) Math.random() * WORLD_HEIGHT, 0.5f, 0.5f);
                grid.insertStaticObject(target);
                targets.add(target);
            }

            cannonVertices = new Vertices(glGraphics, 3, 0, false, false);
            cannonVertices.setVertices(new float[] { -0.5f, -0.5f, 0.5f, 0.0f, -0.5f, 0.5f }, 0, 6);

            ballVertices = new Vertices(glGraphics, 4, 6, false, false);
            ballVertices.setVertices(new float[] { -0.1f, -0.1f, 0.1f, -0.1f, 0.1f, 0.1f, -0.1f, 0.1f }, 0, 8);
            ballVertices.setIndices(new short[] { 0, 1, 2, 2, 3, 0 }, 0, 6);

            targetVertices = new Vertices(glGraphics, 4, 6, false, false);
            targetVertices.setVertices(new float[] { -0.25f, -0.25f, 0.25f, -0.25f, 0.25f, 0.25f, -0.25f, 0.25f }, 0, 8);
            targetVertices.setIndices(new short[] { 0, 1, 2, 2, 3, 0 }, 0, 6);

            camera = new Camera2D(glGraphics, WORLD_WIDTH, WORLD_HEIGHT);
        }

        public void update(float deltaTime) {
            List&lt;TouchEvent&gt; touchEvents = game.getInput().getTouchEvents();
            game.getInput().getKeyEvents();

            int len = touchEvents.size();
            for (int i = 0; i &lt; len; i++) {
                TouchEvent event = touchEvents.get(i);

                camera.touchToWorld(touchPos.set(event.x, event.y));

                cannon.angle = touchPos.sub(cannon.position).angle();

                if (event.type == TouchEvent.TOUCH_UP) {
                    float radians = cannon.angle * Vector2.TO_RADIANS;
                    float ballSpeed = touchPos.len() * 2;
                    ball.position.set(cannon.position);
                    ball.velocity.x = FloatMath.cos(radians) * ballSpeed;
                    ball.velocity.y = FloatMath.sin(radians) * ballSpeed;
                    ball.bounds.lowerLeft.set(ball.position.x - 0.1f, ball.position.y - 0.1f);
                }
            }

            ball.velocity.add(gravity.x * deltaTime, gravity.y * deltaTime);
            ball.position.add(ball.velocity.x * deltaTime, ball.velocity.y * deltaTime);
            ball.bounds.lowerLeft.add(ball.velocity.x * deltaTime, ball.velocity.y * deltaTime);

            List&lt;GameObject&gt; colliders = grid.getPotentialColliders(ball);
            len = colliders.size();
            for (int i = 0; i &lt; len; i++) {
                GameObject collider = colliders.get(i);
                if (OverlapTester.overlapRectangles(ball.bounds, collider.bounds)) {
                    grid.removeObject(collider);
                    targets.remove(collider);
                }
            }

            if (ball.position.y &gt; 0) {
                camera.position.set(ball.position);
                camera.zoom = 1 + ball.position.y / WORLD_HEIGHT;
            } else {
                camera.position.set(WORLD_WIDTH / 2, WORLD_HEIGHT / 2);
                camera.zoom = 1;
            }
        }

        public void present(float deltaTime) {
            GL10 gl = glGraphics.getGL();
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
            camera.setViewportAndMatrices();

            gl.glColor4f(0, 1, 0, 1);
            targetVertices.bind();
            int len = targets.size();
            for (int i = 0; i &lt; len; i++) {
                GameObject target = targets.get(i);
                gl.glLoadIdentity();
                gl.glTranslatef(target.position.x, target.position.y, 0);
                targetVertices.draw(GL10.GL_TRIANGLES, 0, 6);
            }
            targetVertices.unbind();

            gl.glLoadIdentity();
            gl.glTranslatef(ball.position.x, ball.position.y, 0);
            gl.glColor4f(1, 0, 0, 1);
            ballVertices.bind();
            ballVertices.draw(GL10.GL_TRIANGLES, 0, 6);
            ballVertices.unbind();

            gl.glLoadIdentity();
            gl.glTranslatef(cannon.position.x, cannon.position.y, 0);
            gl.glRotatef(cannon.angle, 0, 0, 1);
            gl.glColor4f(1, 1, 1, 1);
            cannonVertices.bind();
            cannonVertices.draw(GL10.GL_TRIANGLES, 0, 3);
            cannonVertices.unbind();
        }

        @Override
        public void pause() {
        }

        @Override
        public void resume() {
        }

        @Override
        public void dispose() {
        }
    }
}
</code></pre><h2 id="纹理图集"><a href="#纹理图集" class="headerlink" title="纹理图集"></a>纹理图集</h2><p>如果有多个纹理的情况下，需要为每种对象类型切换纹理，这样效率并不高。可以将多个纹理放在一张图片中，组成纹理图集，这样可以节省状态转换工作量，提高性能。例子选择64像素对应空间中的1米，纹理的宽度和高度必须是2的倍数，这样处理比较方便。不过也可以使用更多的像素，取决于屏幕大小。下面是使用纹理图集的示例TextureAtlasTest类。</p>
<pre><code>public class TextureAtlasTest extends GLGame {

    public Screen getStartScreen() {
        return new TextureAtlasScreen(this);
    }

    class TextureAtlasScreen extends Screen {
        final int NUM_TARGETS = 20;
        final float WORLD_WIDTH = 9.6f;
        final float WORLD_HEIGHT = 4.8f;
        GLGraphics glGraphics;        
        Cannon cannon;
        DynamicGameObject ball;
        List&lt;GameObject&gt; targets;
        SpatialHashGrid grid;

        Vertices cannonVertices;
        Vertices ballVertices;
        Vertices targetVertices;

        Vector2 touchPos = new Vector2();
        Vector2 gravity = new Vector2(0,-10);

        Camera2D camera;

        Texture texture;

        public TextureAtlasScreen(Game game) {
            super(game);
            glGraphics = ((GLGame)game).getGLGraphics();

            cannon = new Cannon(0, 0, 1, 0.5f);
            ball = new DynamicGameObject(0, 0, 0.2f, 0.2f);
            targets = new ArrayList&lt;GameObject&gt;(NUM_TARGETS);
            grid = new SpatialHashGrid(WORLD_WIDTH, WORLD_HEIGHT, 2.5f);
            for(int i = 0; i &lt; NUM_TARGETS; i++) {
                GameObject target = new GameObject((float)Math.random() * WORLD_WIDTH, 
                                               (float)Math.random() * WORLD_HEIGHT,
                                               0.5f, 0.5f);  
                grid.insertStaticObject(target);
                targets.add(target);
            }                        

            cannonVertices = new Vertices(glGraphics, 4, 6, false, true);
            cannonVertices.setVertices(new float[] { -0.5f, -0.25f, 0.0f, 0.5f, 
                                                  0.5f, -0.25f, 1.0f, 0.5f,
                                                  0.5f,  0.25f, 1.0f, 0.0f,
                                                 -0.5f,  0.25f, 0.0f, 0.0f }, 
                                                 0, 16);
            cannonVertices.setIndices(new short[] {0, 1, 2, 2, 3, 0}, 0, 6);

            ballVertices = new Vertices(glGraphics, 4, 6, false, true);            
            ballVertices.setVertices(new float[] { -0.1f, -0.1f, 0.0f, 0.75f,
                                                0.1f, -0.1f, 0.25f, 0.75f,
                                                0.1f,  0.1f, 0.25f, 0.5f,
                                               -0.1f,  0.1f, 0.0f, 0.5f }, 
                                                0, 16);
            ballVertices.setIndices(new short[] {0, 1, 2, 2, 3, 0}, 0, 6);

            targetVertices = new Vertices(glGraphics, 4, 6, false, true);
            targetVertices.setVertices(new float[] { -0.25f, -0.25f, 0.5f, 1.0f,
                                                  0.25f, -0.25f, 1.0f, 1.0f,
                                                  0.25f,  0.25f, 1.0f, 0.5f,
                                                 -0.25f,  0.25f, 0.5f, 0.5f }, 
                                                 0, 16);
            targetVertices.setIndices(new short[] {0, 1, 2, 2, 3, 0}, 0, 6);

            camera = new Camera2D(glGraphics, WORLD_WIDTH, WORLD_HEIGHT);
        }

        @Override
        public void update(float deltaTime) {
            List&lt;TouchEvent&gt; touchEvents = game.getInput().getTouchEvents();
            game.getInput().getKeyEvents();

            int len = touchEvents.size();
            for (int i = 0; i &lt; len; i++) {
                TouchEvent event = touchEvents.get(i);

                camera.touchToWorld(touchPos.set(event.x, event.y));

                cannon.angle = touchPos.sub(cannon.position).angle();                       

                if(event.type == TouchEvent.TOUCH_UP) {
                    float radians = cannon.angle * Vector2.TO_RADIANS;
                    float ballSpeed = touchPos.len() * 2;
                    ball.position.set(cannon.position);
                    ball.velocity.x = FloatMath.cos(radians) * ballSpeed;
                    ball.velocity.y = FloatMath.sin(radians) * ballSpeed;
                    ball.bounds.lowerLeft.set(ball.position.x - 0.1f, ball.position.y - 0.1f);
                }
            }

            ball.velocity.add(gravity.x * deltaTime, gravity.y * deltaTime);
            ball.position.add(ball.velocity.x * deltaTime, ball.velocity.y * deltaTime);
            ball.bounds.lowerLeft.add(ball.velocity.x * deltaTime, ball.velocity.y * deltaTime);

            List&lt;GameObject&gt; colliders = grid.getPotentialColliders(ball);
            len = colliders.size(); 
            for(int i = 0; i &lt; len; i++) {
                GameObject collider = colliders.get(i);
                if(OverlapTester.overlapRectangles(ball.bounds, collider.bounds)) {
                    grid.removeObject(collider);
                    targets.remove(collider);
                }
            }

            if(ball.position.y &gt; 0) {
                camera.position.set(ball.position);
                camera.zoom = 1 + ball.position.y / WORLD_HEIGHT; 
            } else {
                camera.position.set(WORLD_WIDTH / 2, WORLD_HEIGHT / 2);
                camera.zoom = 1;
            }
        }

        @Override
        public void present(float deltaTime) {
            GL10 gl = glGraphics.getGL();
            gl.glClear(GL10.GL_COLOR_BUFFER_BIT);
            camera.setViewportAndMatrices();

            gl.glEnable(GL10.GL_BLEND);
            gl.glBlendFunc(GL10.GL_SRC_ALPHA, GL10.GL_ONE_MINUS_SRC_ALPHA);
            gl.glEnable(GL10.GL_TEXTURE_2D);
            texture.bind();

            targetVertices.bind();
            int len = targets.size();
            for(int i = 0; i &lt; len; i++) {               
                GameObject target = targets.get(i);
                gl.glLoadIdentity();
                gl.glTranslatef(target.position.x, target.position.y, 0);
                targetVertices.draw(GL10.GL_TRIANGLES, 0, 6);
            }
            targetVertices.unbind();

            gl.glLoadIdentity();
            gl.glTranslatef(ball.position.x, ball.position.y, 0);            
            ballVertices.bind();
            ballVertices.draw(GL10.GL_TRIANGLES, 0, 6);
            ballVertices.unbind();  

            gl.glLoadIdentity();
            gl.glTranslatef(cannon.position.x, cannon.position.y, 0);
            gl.glRotatef(cannon.angle, 0, 0, 1);            
            cannonVertices.bind();
            cannonVertices.draw(GL10.GL_TRIANGLES, 0, 6);
            cannonVertices.unbind();                    
        }

        @Override
        public void pause() {
        }

        @Override
        public void resume() {
            texture = new Texture(((GLGame)game), &quot;atlas.png&quot;);
        }

        @Override
        public void dispose() {
        }
    }
}
</code></pre>
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2015/09/17/Game Frame/10、2D游戏编程技巧下/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2015/09/12/Game Frame/8、OpenGL示例下/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/touxiang.jpg" alt="柒夜's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        whu_cc@163.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: whu_cc@163.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2017/07/">七月 2017<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/06/">六月 2017<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2017/04/">四月 2017<span class="sidebar_archives-count">22</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/07/">七月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">四月 2016<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/10/">十月 2015<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/09/">九月 2015<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/08/">八月 2015<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/07/">七月 2015<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/06/">六月 2015<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/05/">五月 2015<span class="sidebar_archives-count">8</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Android基础/">Android基础<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/categories/Android官方培训教程/">Android官方培训教程<span class="sidebar_archives-count">10</span></a></li><li><a class="sidebar_archives-link" href="/categories/PHP/">PHP<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/Swift/">Swift<span class="sidebar_archives-count">22</span></a></li><li><a class="sidebar_archives-link" href="/categories/libgdx/">libgdx<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/代码大全/">代码大全<span class="sidebar_archives-count">8</span></a></li><li><a class="sidebar_archives-link" href="/categories/技术/">技术<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/杂谈/">杂谈<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/游戏框架/">游戏框架<span class="sidebar_archives-count">12</span></a></li><li><a class="sidebar_archives-link" href="/categories/第一行代码/">第一行代码<span class="sidebar_archives-count">5</span></a></li><li><a class="sidebar_archives-link" href="/categories/算法导论/">算法导论<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/gallery" title="相册">
                
                    <i class="material-icons sidebar-material-icons">photo</i>
                
                相册
            </a>
        </li>
        
    
        <li>
            <a href="/tags" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">label_outline</i>
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="时间轴">
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                时间轴
            </a>
        </li>
        
            <li class="divider"></li>
        
    
        <li>
            <a href="/links" title="友情链接">
                
                    <i class="material-icons sidebar-material-icons">link</i>
                
                友情链接
            </a>
        </li>
        
    
        <li>
            <a href="/about" title="关于我">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于我
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">75</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>柒夜
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

		<!--
        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
        -->
    
</footer>


                    <!-- Import File -->


    <script>lsloader.load("js/lazyload.min.js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==")</script>
    <script>lsloader.load("js/js.min.js","/js/js.min.js?oAl/+lvaqTFV31JXTmbrNA==")</script>



    <script>lsloader.load("js/nprogress.js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==")</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Window Load-->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Bing Background -->


<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.4.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
