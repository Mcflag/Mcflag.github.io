<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head>
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.4.0 -->
    <script>window.materialVersion = "1.4.0"</script>

    <!-- Title -->
    
    <title>
        
            2游戏框架中的Android基础 | 
        
        柒夜
    </title>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">
    
    
    
    
    
    
    
    
    
    

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="柒夜">
    <meta name="description" itemprop="description" content="摘要游戏框架中的Android基础">
    <meta name="keywords" content="null,游戏框架">

    <!-- Site Verification -->
    
    

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="柒夜">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://yoursite.com">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="2游戏框架中的Android基础 | 柒夜">
    <meta property="og:image" content="/img/favicon.png" />
    <meta property="og:description" content="摘要游戏框架中的Android基础">
    <meta property="og:article:tag" content="游戏框架"> 

    
        <meta property="article:published_time" content="Mon Aug 31 2015 23:17:22 GMT+0800" />
        <meta property="article:modified_time" content="Fri Jun 30 2017 23:09:59 GMT+0800" />
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="2游戏框架中的Android基础 | 柒夜">
    <meta name="twitter:description" content="摘要游戏框架中的Android基础">
    <meta name="twitter:image" content="/img/favicon.png">
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="http://yoursite.com" />

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://yoursite.com/2015/08/31/Game Frame/2游戏框架中的Android基础/index.html" />
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Article",
    "publisher": {
        "@type": "Organization",
        "name": "柒夜",
        "logo": "/img/favicon.png"
    },
    "author": {
        "@type": "Person",
        "name": "柒夜",
        "image": {
            "@type": "ImageObject",
            "url": "/img/favicon.png"
        },
        "description": "暗夜之虫 会集光中"
    },
    "headline": "2游戏框架中的Android基础",
    "url": "http://yoursite.com/2015/08/31/Game Frame/2游戏框架中的Android基础/index.html",
    "datePublished": "Mon Aug 31 2015 23:17:22 GMT+0800",
    "dateModified": "Fri Jun 30 2017 23:09:59 GMT+0800",
    "description": "摘要游戏框架中的Android基础",
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://yoursite.com"
    }
}
</script>


    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+materialVersion+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(data&&data.indexOf(versionString)===-1){lsloader.removeLS(key)}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload){cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload);return}code=code.split(versionString)[1];if(/\.js?.+$/.test(versionNumber)){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload)}};lsloader.requestResource=function(name,path,cssonload){var that=this;if(/\.js?.+$/.test(path)){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else if(/\.css?.+$/.test(path)){this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import CSS & jQuery -->
    
        <style id="css/material.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/material.min.css","/css/material.min.css?fJTiM/K1J3dWIruo3pxtAw==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        <style id="css/style.min.css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("css/style.min.css","/css/style.min.css?oCSEO3ST+aEypEwttTDI9g==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";})</script>
        
        
            <style>
    
    
    
    
    
    
    
    
    
    
    
</style>

        
        <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons"rel="stylesheet">


        <script>lsloader.load("js/jquery.min.js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==")</script>
    
    
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Analytics -->
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->

    <!-- Left aligned menu below button -->
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    
    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#摘要"><span class="post-toc-number">1.</span> <span class="post-toc-text">摘要</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#使用ListActivity"><span class="post-toc-number">2.</span> <span class="post-toc-text">使用ListActivity</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#StringBuilder的使用，与StringBuffer和String的比较"><span class="post-toc-number">3.</span> <span class="post-toc-text">StringBuilder的使用，与StringBuffer和String的比较</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在大部分情况下StringBuffer比String效率高"><span class="post-toc-number">3.0.1.</span> <span class="post-toc-text">在大部分情况下StringBuffer比String效率高</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#在大部分情况下StringBuilder比StringBuffer效率高"><span class="post-toc-number">3.0.2.</span> <span class="post-toc-text">在大部分情况下StringBuilder比StringBuffer效率高</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#单点触摸SingleTouchTest"><span class="post-toc-number">4.</span> <span class="post-toc-text">单点触摸SingleTouchTest</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#多点触摸MultiTouchTest"><span class="post-toc-number">5.</span> <span class="post-toc-text">多点触摸MultiTouchTest</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#监听按键事件KeyTest"><span class="post-toc-number">6.</span> <span class="post-toc-text">监听按键事件KeyTest</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#处理加速计AccelerometerTest"><span class="post-toc-number">7.</span> <span class="post-toc-text">处理加速计AccelerometerTest</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#使用assets文件夹下的资源"><span class="post-toc-number">8.</span> <span class="post-toc-text">使用assets文件夹下的资源</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#使用外部存储ExternalStorageTest"><span class="post-toc-number">9.</span> <span class="post-toc-text">使用外部存储ExternalStorageTest</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#声音的使用SoundPoolTest"><span class="post-toc-number">10.</span> <span class="post-toc-text">声音的使用SoundPoolTest</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#创建一个SoundPool-（构造函数）"><span class="post-toc-number">10.0.1.</span> <span class="post-toc-text">创建一个SoundPool （构造函数）</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#加载音频资源"><span class="post-toc-number">10.0.2.</span> <span class="post-toc-text">加载音频资源</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#播放控制"><span class="post-toc-number">10.0.3.</span> <span class="post-toc-text">播放控制</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#更多属性设置"><span class="post-toc-number">10.0.4.</span> <span class="post-toc-text">更多属性设置</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#释放资源"><span class="post-toc-number">10.0.5.</span> <span class="post-toc-text">释放资源</span></a></li><li class="post-toc-item post-toc-level-4"><a class="post-toc-link" href="#SoundPool总结："><span class="post-toc-number">10.0.6.</span> <span class="post-toc-text">SoundPool总结：</span></a></li></ol></li></ol></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#使用MediaPlayer来播放music和视频"><span class="post-toc-number">11.</span> <span class="post-toc-text">使用MediaPlayer来播放music和视频</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#全屏Activity"><span class="post-toc-number">12.</span> <span class="post-toc-text">全屏Activity</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#屏幕锁定WakeLock的使用"><span class="post-toc-number">13.</span> <span class="post-toc-text">屏幕锁定WakeLock的使用</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#简单的使用canvas渲染view"><span class="post-toc-number">14.</span> <span class="post-toc-text">简单的使用canvas渲染view</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#简单的绘制线，圆和矩形"><span class="post-toc-number">15.</span> <span class="post-toc-text">简单的绘制线，圆和矩形</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#加载图片Bitmap"><span class="post-toc-number">16.</span> <span class="post-toc-text">加载图片Bitmap</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#使用Font文件来改变字体"><span class="post-toc-number">17.</span> <span class="post-toc-text">使用Font文件来改变字体</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#SurfaceView的使用"><span class="post-toc-number">18.</span> <span class="post-toc-text">SurfaceView的使用</span></a></li></ol>
        <!--
        <li class="mdl-menu__item">
            Some Action
        </li>
        -->
    </ul>
    





<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 24 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                2游戏框架中的Android基础
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/touxiang.jpg" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>柒夜</strong>
        <span>8月 31, 2015</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/游戏框架/">游戏框架</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=2游戏框架中的Android基础&url=http://yoursite.com/2015/08/31/Game Frame/2游戏框架中的Android基础/index.html&pic=&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    

    <!-- Share Facebook -->
    

    <!-- Share Google+ -->
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=柒夜&title=2游戏框架中的Android基础&summary=从零开始&pics=http://yoursite.com/img/favicon.png&url=http://yoursite.com/2015/08/31/Game Frame/2游戏框架中的Android基础/index.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="摘要"><a href="#摘要" class="headerlink" title="摘要"></a>摘要</h2><p>游戏框架中的Android基础<br><a id="more"></a></p>
<h2 id="使用ListActivity"><a href="#使用ListActivity" class="headerlink" title="使用ListActivity"></a>使用ListActivity</h2><p>ListAcvitity是一个默认使用ListView显示的Activity。创建一个Activity并继承ListActivity，在onCreate方法里设置Adapter。以下的例子使用ArrayAdapter和android系统默认的一个包含ListView的layout来设置Adapter。</p>
<pre><code>String tests[] = { &quot;LifeCycleTest&quot;, &quot;SingleTouchTest&quot;，&quot;AssetsTest&quot;, &quot;ExternalStorageTest&quot; };
setListAdapter(new ArrayAdapter&lt;String&gt;(this, android.R.layout.simple_list_item_1, tests));
</code></pre><p>然后需要实现ListView的每一个item点击事件，需要重写onListItemClick方法。在本例中点击每一个item是启动一个新的Activity。</p>
<pre><code>@Override
protected void onListItemClick(ListView list, View view, int position, long id) {
    super.onListItemClick(list, view, position, id);
    String testName = tests[position];
    try {
        Class clazz = Class.forName(&quot;包名&quot; + testName);
        Intent intent = new Intent(this, clazz);
        startActivity(intent);
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
}
</code></pre><h2 id="StringBuilder的使用，与StringBuffer和String的比较"><a href="#StringBuilder的使用，与StringBuffer和String的比较" class="headerlink" title="StringBuilder的使用，与StringBuffer和String的比较"></a>StringBuilder的使用，与StringBuffer和String的比较</h2><p>String是字符串常量，StringBuffer是字符串变量并且线程安全，StringBuilder是字符串变量但非线程安全。</p>
<p>String 类型和 StringBuffer 类型的主要性能区别其实在于 String 是不可变的对象, 因此在每次对 String 类型进行改变的时候其实都等同于生成了一个新的 String 对象，然后将指针指向新的 String 对象，所以经常改变内容的字符串最好不要用 String ，因为每次生成对象都会对系统性能产生影响，特别当内存中无引用对象多了以后， JVM 的 GC 就会开始工作，那速度是一定会相当慢的。</p>
<p>而如果是使用 StringBuffer 类则结果就不一样了，每次结果都会对 StringBuffer 对象本身进行操作，而不是生成新的对象，再改变对象引用。所以在一般情况下我们推荐使用 StringBuffer ，特别是字符串对象经常改变的情况下。而在某些特别情况下， String 对象的字符串拼接其实是被 JVM 解释成了 StringBuffer 对象的拼接，所以这些时候 String 对象的速度并不会比 StringBuffer 对象慢，而特别是以下的字符串对象生成中， String 效率是远要比 StringBuffer 快的：</p>
<pre><code>String S1 = “This is only a” + “ simple” + “ test”;
StringBuffer Sb = new StringBuilder(“This is only a”).append(“ simple”).append(“ test”);
</code></pre><p>你会很惊讶的发现，生成 String S1 对象的速度简直太快了，而这个时候 StringBuffer 居然速度上根本一点都不占优势。其实这是 JVM 的一个把戏，在 JVM 眼里，这个</p>
<pre><code>String S1 = “This is only a” + “ simple” + “test”; 
</code></pre><p>其实就是：</p>
<pre><code>String S1 = “This is only a simple test”; 
</code></pre><p>所以当然不需要太多的时间了。但大家这里要注意的是，如果你的字符串是来自另外的 String 对象的话，速度就没那么快了，譬如：</p>
<pre><code>String S2 = “This is only a”;
String S3 = “ simple”;
String S4 = “ test”;
String S1 = S2 +S3 + S4;
</code></pre><p>这时候 JVM 会规规矩矩的按照原来的方式去做。</p>
<h4 id="在大部分情况下StringBuffer比String效率高"><a href="#在大部分情况下StringBuffer比String效率高" class="headerlink" title="在大部分情况下StringBuffer比String效率高"></a>在大部分情况下StringBuffer比String效率高</h4><p>StringBuffer线程安全的可变字符序列。一个类似于 String 的字符串缓冲区，但不能修改。虽然在任意时间点上它都包含某种特定的字符序列，但通过某些方法调用可以改变该序列的长度和内容。</p>
<p>可将字符串缓冲区安全地用于多个线程。可以在必要时对这些方法进行同步，因此任意特定实例上的所有操作就好像是以串行顺序发生的，该顺序与所涉及的每个线程进行的方法调用顺序一致。</p>
<p>StringBuffer 上的主要操作是 append 和 insert 方法，可重载这些方法，以接受任意类型的数据。每个方法都能有效地将给定的数据转换成字符串，然后将该字符串的字符追加或插入到字符串缓冲区中。append 方法始终将这些字符添加到缓冲区的末端；而 insert 方法则在指定的点添加字符。</p>
<p>例如，如果 z 引用一个当前内容是“start”的字符串缓冲区对象，则此方法调用 z.append(“le”) 会使字符串缓冲区包含“startle”，而 z.insert(4, “le”) 将更改字符串缓冲区，使之包含“starlet”。</p>
<h4 id="在大部分情况下StringBuilder比StringBuffer效率高"><a href="#在大部分情况下StringBuilder比StringBuffer效率高" class="headerlink" title="在大部分情况下StringBuilder比StringBuffer效率高"></a>在大部分情况下StringBuilder比StringBuffer效率高</h4><p>StringBuilder一个可变的字符序列，是5.0新增的。此类提供一个与 StringBuffer 兼容的 API，但不保证同步。该类被设计用作 StringBuffer 的一个简易替换，用在字符串缓冲区被单个线程使用的时候（这种情况很普遍）。如果可能，建议优先采用该类，因为在大多数实现中，它比 StringBuffer 要快。两者的方法基本相同。</p>
<pre><code>StringBuilder builder = new StringBuilder();
builder.append(text);
textView.setText(builder.toString());
</code></pre><h2 id="单点触摸SingleTouchTest"><a href="#单点触摸SingleTouchTest" class="headerlink" title="单点触摸SingleTouchTest"></a>单点触摸SingleTouchTest</h2><p>触摸事件需要实现OnTouchListener，并重写onTouch方法。在onTouch方法中可以处理DOWN，MOVE，CANCEL和UP事件。</p>
<pre><code>view.setOnTouchListener(new OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        switch (event.getAction()) {
           case MotionEvent.ACTION_DOWN:
            break;
        case MotionEvent.ACTION_MOVE:
            break;
        case MotionEvent.ACTION_CANCEL:
            break;
        case MotionEvent.ACTION_UP:
            break;
        }
        return false;
    }
});
</code></pre><p>返回值表明是否拦截触摸事件。return false表明不拦截，还会执行下层或者另外的手势Touch事件，比如onFling等等，return true表明会拦截该touch事件，不再执行另外的手势事件。</p>
<h2 id="多点触摸MultiTouchTest"><a href="#多点触摸MultiTouchTest" class="headerlink" title="多点触摸MultiTouchTest"></a>多点触摸MultiTouchTest</h2><p>多点触摸与单点触摸基本上差别不大，就是需要多处理几个手指。同时多点触摸是在Android 2.0以上的版本里实现的，并且还需要看设备是否支持。实例如下：</p>
<pre><code>float[] x = new float[10]; //保存所有点的x坐标
float[] y = new float[10]; //保存所有点的y坐标
boolean[] touched = new boolean[10]; //保存所有的点是否touch

@Override
public boolean onTouch(View v, MotionEvent event) {
    int action = event.getAction() &amp; MotionEvent.ACTION_MASK;
    int pointerIndex = (event.getAction() &amp; MotionEvent.ACTION_POINTER_ID_MASK) &gt;&gt; MotionEvent.ACTION_POINTER_ID_SHIFT;
    int pointerId = event.getPointerId(pointerIndex);

    switch (action) {
    case MotionEvent.ACTION_DOWN:
    case MotionEvent.ACTION_POINTER_DOWN:
        touched[pointerId] = true;
        x[pointerId] = (int)event.getX(pointerIndex);
        y[pointerId] = (int)event.getY(pointerIndex);
        break;

    case MotionEvent.ACTION_UP:          
    case MotionEvent.ACTION_POINTER_UP:
    case MotionEvent.ACTION_CANCEL:
        touched[pointerId] = false; 
        x[pointerId] = (int)event.getX(pointerIndex);
        y[pointerId] = (int)event.getY(pointerIndex);
        break;

    case MotionEvent.ACTION_MOVE:
        int pointerCount = event.getPointerCount();
        for (int i = 0; i &lt; pointerCount; i++) {
            pointerIndex = i;
            pointerId = event.getPointerId(pointerIndex);
            x[pointerId] = (int)event.getX(pointerIndex);
            y[pointerId] = (int)event.getY(pointerIndex);
        }
        break;
    }   
    return true;
}
</code></pre><h2 id="监听按键事件KeyTest"><a href="#监听按键事件KeyTest" class="headerlink" title="监听按键事件KeyTest"></a>监听按键事件KeyTest</h2><p>要监听键盘需要首先实现OnKeyListener，并重写onKey方法。</p>
<p>对于一个view，view.setFocusable设置这个view是用键盘是否能获得焦点，view.setFocusableInTouchMode设置这个view用触摸是否能获得焦点，使用键盘时最好先调用view.requestFocus()方法设置焦点。</p>
<pre><code>@Override
public boolean onKey(View view, int keyCode, KeyEvent event) {
    switch (event.getAction()) {
    case KeyEvent.ACTION_DOWN:
        break;
    case KeyEvent.ACTION_UP:
        break;
    }

    if (event.getKeyCode() == KeyEvent.KEYCODE_BACK)
        return false;
    else
        return true;
}
</code></pre><p>有两个状态，DOWN和UP。并且可以使用getKeyCode()方法得到是哪一个Key。</p>
<h2 id="处理加速计AccelerometerTest"><a href="#处理加速计AccelerometerTest" class="headerlink" title="处理加速计AccelerometerTest"></a>处理加速计AccelerometerTest</h2><p>要使用加速度计需要先注册使用SENSOR_SERVICE，并且还需要查看系统是否存在加速计。然后重写onSensorChanged和onAccuracyChanged方法，通过SensorEvent得到x，y，z三个方向上的加速度。</p>
<pre><code>SensorManager manager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
if (manager.getSensorList(Sensor.TYPE_ACCELEROMETER).size() == 0) {
    textView.setText(&quot;No accelerometer installed&quot;);
} else {
    Sensor accelerometer = manager.getSensorList(Sensor.TYPE_ACCELEROMETER).get(0);
    if (!manager.registerListener(this, accelerometer, SensorManager.SENSOR_DELAY_GAME)) {
        textView.setText(&quot;Couldn&apos;t register sensor listener&quot;);
    }
}

@Override
public void onSensorChanged(SensorEvent event) {
    builder.setLength(0);
    builder.append(&quot;x: &quot;);
    builder.append(event.values[0]);
    builder.append(&quot;, y: &quot;);
    builder.append(event.values[1]);
    builder.append(&quot;, z: &quot;);
    builder.append(event.values[2]);
    textView.setText(builder.toString());
}

@Override
public void onAccuracyChanged(Sensor sensor, int accuracy) {
    // nothing to do here
}
</code></pre><h2 id="使用assets文件夹下的资源"><a href="#使用assets文件夹下的资源" class="headerlink" title="使用assets文件夹下的资源"></a>使用assets文件夹下的资源</h2><p>需要通过使用AssetManager来得到并使用assets下的资源。</p>
<pre><code>AssetManager assetManager = getAssets();
InputStream inputStream = null;
try {
    inputStream = assetManager.open(&quot;texts/myawesometext.txt&quot;);
    String text = loadTextFile(inputStream);
    textView.setText(text);
} catch (IOException e) {
    textView.setText(&quot;Couldn&apos;t load file&quot;);
} finally {
    if (inputStream != null)｛
        try {
            inputStream.close();
        } catch (IOException e) {
            textView.setText(&quot;Couldn&apos;t close file&quot;);
        }
    ｝
}

public String loadTextFile(InputStream inputStream) throws IOException {
    ByteArrayOutputStream byteStream = new ByteArrayOutputStream();
    byte[] bytes = new byte[4096];
    int len = 0;
    while ((len = inputStream.read(bytes)) &gt; 0)｛
        byteStream.write(bytes, 0, len);
    ｝
    return new String(byteStream.toByteArray(), &quot;UTF8&quot;);
}
</code></pre><h2 id="使用外部存储ExternalStorageTest"><a href="#使用外部存储ExternalStorageTest" class="headerlink" title="使用外部存储ExternalStorageTest"></a>使用外部存储ExternalStorageTest</h2><p>需要先判断外部存储是否存在，只有状态是存在的情况下才能继续使用。并且还需要在manifest文件中注册使用SD卡的权限。</p>
<pre><code>String state = Environment.getExternalStorageState();
if (!state.equals(Environment.MEDIA_MOUNTED)) {
    textView.setText(&quot;No external storage mounted&quot;);
} else {
    File externalDir = Environment.getExternalStorageDirectory();
    File textFile = new File(externalDir.getAbsolutePath() + File.separator + &quot;text.txt&quot;);
    try {
        writeTextFile(textFile, &quot;This is a test. Roger&quot;);
        String text = readTextFile(textFile);
        textView.setText(text);
        if (!textFile.delete()) {
            textView.setText(&quot;Couldn&apos;t remove temporary file&quot;);
        }
    } catch (IOException e) {
        textView.setText(&quot;something went wrong! &quot; + e.getMessage());
    }
}

//下面是读文件和写文件的方法
private void writeTextFile(File file, String text) throws IOException {
    BufferedWriter writer = new BufferedWriter(new FileWriter(file));
    writer.write(text);
    writer.close();
}

private String readTextFile(File file) throws IOException {
    BufferedReader reader = new BufferedReader(new FileReader(file));
    StringBuilder text = new StringBuilder();
    String line;
    while ((line = reader.readLine()) != null) {
        text.append(line);
        text.append(&quot;\n&quot;);
    }
    reader.close();
    return text.toString();
}
</code></pre><h2 id="声音的使用SoundPoolTest"><a href="#声音的使用SoundPoolTest" class="headerlink" title="声音的使用SoundPoolTest"></a>声音的使用SoundPoolTest</h2><p>一般将声音文件放在assets文件夹下，有两种方法能够使用资源。SoundPool适合短促的音效。</p>
<ul>
<li>InputStream open(String fileName):根据文件名来获取原始资源对应的输入流；</li>
<li>AssetFileDescriptor openFd(String fileName)：根据文件名来获取原始资源对应的AssetFileDescriptor 资源描述，应用程序可以通过它来获取原始资源</li>
</ul>
<p>获得声音资源并使用的代码如下</p>
<pre><code>setVolumeControlStream(AudioManager.STREAM_MUSIC);
soundPool = new SoundPool(20, AudioManager.STREAM_MUSIC, 0);

try {
    AssetManager assetManager = getAssets();
    AssetFileDescriptor descriptor = assetManager.openFd(&quot;explosion.ogg&quot;);
    explosionId = soundPool.load(descriptor, 1);
} catch (IOException e) {
    textView.setText(&quot;Couldn&apos;t load sound effect from asset, &quot; + e.getMessage());
}

//播放的方法
if (explosionId != -1) {
    soundPool.play(explosionId, 1, 1, 0, 0, 1);
}
</code></pre><h4 id="创建一个SoundPool-（构造函数）"><a href="#创建一个SoundPool-（构造函数）" class="headerlink" title="创建一个SoundPool （构造函数）"></a>创建一个SoundPool （构造函数）</h4><p>使用SoundPool时需要使用构造函数new一个实例出来。</p>
<pre><code>public SoundPool(int maxStream, int streamType, int srcQuality) 
</code></pre><p>参数的含义为：</p>
<ul>
<li>maxStream —— 同时播放的流的最大数量</li>
<li>streamType —— 流的类型，一般为STREAM_MUSIC(具体在AudioManager类中列出)</li>
<li>srcQuality —— 采样率转化质量，当前无效果，使用0作为默认值</li>
</ul>
<h4 id="加载音频资源"><a href="#加载音频资源" class="headerlink" title="加载音频资源"></a>加载音频资源</h4><p>可以通过四种途径来加载一个音频资源：其中的priority参数目前没有效果，建议设置为1。 </p>
<ul>
<li>int load(AssetFileDescriptor afd, int priority)通过一个AssetFileDescriptor对象</li>
<li>int load(Context context, int resId, int priority)通过一个资源ID</li>
<li>int load(String path, int priority)通过指定的路径加载</li>
<li>int load(FileDescriptor fd, long offset, long length, int priority)通过FileDescriptor加载</li>
</ul>
<blockquote>
<p>需要注意的是，流的加载过程是一个将音频解压为原始16位PCM数据的过程，由一个后台线程来进行处理异步，所以初始化后不能立即播放，需要等待一点时间。</p>
</blockquote>
<h4 id="播放控制"><a href="#播放控制" class="headerlink" title="播放控制"></a>播放控制</h4><p>有以下几个函数可用于控制播放：</p>
<pre><code>final int play(int soundID, float leftVolume, float rightVolume, int priority, int loop, float rate)
</code></pre><p>播放指定音频的音效，并返回一个streamID 。参数的含义是：</p>
<ul>
<li>soundID —— a soundID returned by the load() function</li>
<li>leftVolume —— left volume value (range = 0.0 to 1.0)</li>
<li>rightVolume —— right volume value (range = 0.0 to 1.0)</li>
<li>priority —— 流的优先级，值越大优先级高，影响当同时播放数量超出了最大支持数时SoundPool对该流的处理，0是最低优先级；</li>
<li>loop —— 循环播放的次数，0为值播放一次，-1为无限循环，其他值为播放loop+1次（例如，3为一共播放4次）.</li>
<li>rate —— 播放的速率，范围0.5-2.0(0.5为一半速率，1.0为正常速率，2.0为两倍速率)</li>
</ul>
<p>暂停指定播放流的音效（streamID 应通过play()返回）。</p>
<pre><code>final void pause(int streamID) 
</code></pre><p>继续播放指定播放流的音效（streamID 应通过play()返回）。</p>
<pre><code>final void resume(int streamID) 
</code></pre><p>终止指定播放流的音效（streamID 应通过play()返回）。</p>
<pre><code>final void stop(int streamID) 
</code></pre><p>这里需要注意的是</p>
<ul>
<li>play()函数传递的是一个load()返回的soundID——指向一个被记载的音频资源 ，如果播放成功则返回一个非0的streamID——指向一个成功播放的流 ；同一个soundID 可以通过多次调用play()而获得多个不同的streamID (只要不超出同时播放的最大数量)；</li>
<li>pause()、resume()和stop()是针对播放流操作的，传递的是play()返回的streamID ;</li>
<li>play()中的priority参数，只在同时播放的流的数量超过了预先设定的最大数量是起作用，管理器将自动终止优先级低的播放流。如果存在多个同样优先级的流，再进一步根据其创建事件来处理，新创建的流的年龄是最小的，将被终止；</li>
<li>无论如何，程序退出时，手动终止播放并释放资源是必要的。</li>
</ul>
<h4 id="更多属性设置"><a href="#更多属性设置" class="headerlink" title="更多属性设置"></a>更多属性设置</h4><p>其实就是paly()中的一些参数的独立设置：</p>
<p>设置指定播放流的循环.</p>
<pre><code>final void setLoop(int streamID, int loop)
</code></pre><p>设置指定播放流的音量. </p>
<pre><code>final void setVolume(int streamID, float leftVolume, float rightVolume) 
</code></pre><p>设置指定播放流的优先级，上面已说明priority的作用.</p>
<pre><code>final void setPriority(int streamID, int priority) 
</code></pre><p>设置指定播放流的速率，0.5-2.0</p>
<pre><code>final void setRate(int streamID, float rate) 
</code></pre><h4 id="释放资源"><a href="#释放资源" class="headerlink" title="释放资源"></a>释放资源</h4><p>可操作的函数有：</p>
<p>卸载一个指定的音频资源.</p>
<pre><code>final boolean unload(int soundID) 
</code></pre><p>释放SoundPool中的所有音频资源.</p>
<pre><code>final void release() 
</code></pre><h4 id="SoundPool总结："><a href="#SoundPool总结：" class="headerlink" title="SoundPool总结："></a>SoundPool总结：</h4><p>一个SoundPool可以：</p>
<ul>
<li>管理多个音频资源，通过load()函数，成功则返回非0的soundID;</li>
<li>同时播放多个音频，通过play()函数，成功则返回非0的streamID;</li>
<li>pause()、resume()和stop()等操作是针对streamID(播放流)的;</li>
<li>当设置为无限循环时，需要手动调用stop()来终止播放;</li>
<li>播放流的优先级(play()中的priority参数)，只在同时播放数超过设定的最大数时起作用;</li>
<li>程序中不用考虑（play触发的）播放流的生命周期，无效的soundID/streamID不会导致程序错误。</li>
</ul>
<h2 id="使用MediaPlayer来播放music和视频"><a href="#使用MediaPlayer来播放music和视频" class="headerlink" title="使用MediaPlayer来播放music和视频"></a>使用MediaPlayer来播放music和视频</h2><p>MediaPlayer需要setDataSource，并且需要在播放前调用prepare()方法，然后用start(),stop(),pause(),release()控制播放和释放资源。</p>
<pre><code>setVolumeControlStream(AudioManager.STREAM_MUSIC);
mediaPlayer = new MediaPlayer();
try {
    AssetManager assetManager = getAssets();
    AssetFileDescriptor descriptor = assetManager.openFd(&quot;music.ogg&quot;);
    mediaPlayer.setDataSource(descriptor.getFileDescriptor(), descriptor.getStartOffset(), descriptor.getLength());
    mediaPlayer.prepare();
    mediaPlayer.setLooping(true);
} catch (IOException e) {
    textView.setText(&quot;Couldn&apos;t load music file, &quot; + e.getMessage());
    mediaPlayer = null;
}

@Override
protected void onResume() {
    super.onResume();
    if (mediaPlayer != null) {
        mediaPlayer.start();
    }
}

protected void onPause() {
    super.onPause();
    if (mediaPlayer != null) {
        mediaPlayer.pause();
        if (isFinishing()) {
            mediaPlayer.stop();
            mediaPlayer.release();
        }
    }
}
</code></pre><h2 id="全屏Activity"><a href="#全屏Activity" class="headerlink" title="全屏Activity"></a>全屏Activity</h2><p>直接使用如下两句代码即可</p>
<pre><code>requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
</code></pre><h2 id="屏幕锁定WakeLock的使用"><a href="#屏幕锁定WakeLock的使用" class="headerlink" title="屏幕锁定WakeLock的使用"></a>屏幕锁定WakeLock的使用</h2><p>需要在manifest文件中添加使用WakeLock的权限</p>
<pre><code>PowerManager powerManager = (PowerManager)getSystemService(Context.POWER_SERVICE);
wakeLock = powerManager.newWakeLock(PowerManager.FULL_WAKE_LOCK, &quot;My Lock&quot;);

@Override
public void onResume() {
    wakeLock.acquire();
    super.onResume();
}

public void onPause() {
    wakeLock.release();
    super.onPause();
}
</code></pre><h2 id="简单的使用canvas渲染view"><a href="#简单的使用canvas渲染view" class="headerlink" title="简单的使用canvas渲染view"></a>简单的使用canvas渲染view</h2><p>自定义一个view，在其onDraw方法中进行绘制，调用invalidate()刷新页面。</p>
<pre><code>class RenderView extends View {
    Random rand = new Random();

    public RenderView(Context context) {
        super(context);
    }

    protected void onDraw(Canvas canvas) {
        canvas.drawRGB(rand.nextInt(256), rand.nextInt(256),
                rand.nextInt(256));
        invalidate();
    }
}
</code></pre><p>简单的在onCreate方法中调用，就能看到效果。</p>
<pre><code>setContentView(new RenderView(this));
</code></pre><h2 id="简单的绘制线，圆和矩形"><a href="#简单的绘制线，圆和矩形" class="headerlink" title="简单的绘制线，圆和矩形"></a>简单的绘制线，圆和矩形</h2><p>先设置一个paint，设置paint的属性，然后调用drawLine，drawCircle和drawRect来绘制。</p>
<pre><code>class RenderView extends View {        
    Paint paint;

    public RenderView(Context context) {
        super(context);
        paint = new Paint();            
    }

    protected void onDraw(Canvas canvas) {
        canvas.drawRGB(255, 255, 255);            
        paint.setColor(Color.RED);
        canvas.drawLine(0, 0, canvas.getWidth()-1, canvas.getHeight()-1, paint);

        paint.setStyle(Style.STROKE);
        paint.setColor(0xff00ff00);            
        canvas.drawCircle(canvas.getWidth() / 2, canvas.getHeight() / 2, 40, paint);

        paint.setStyle(Style.FILL);
        paint.setColor(0x770000ff);
        canvas.drawRect(100, 100, 200, 200, paint);
        invalidate();
    }
}
</code></pre><h2 id="加载图片Bitmap"><a href="#加载图片Bitmap" class="headerlink" title="加载图片Bitmap"></a>加载图片Bitmap</h2><p>将文件读入到InputStream中，然后调用BitmapFactory.decodeStream()方法将其转换成Bitmap。</p>
<pre><code>class RenderView extends View {
    Bitmap bob565;
    Bitmap bob4444;
    Rect dst = new Rect();

    public RenderView(Context context) {
        super(context);

        try {
            AssetManager assetManager = context.getAssets();
            InputStream inputStream = assetManager.open(&quot;bobrgb888.png&quot;);
            bob565 = BitmapFactory.decodeStream(inputStream);
            inputStream.close();

            inputStream = assetManager.open(&quot;bobargb8888.png&quot;);
            BitmapFactory.Options options = new BitmapFactory.Options();
            options.inPreferredConfig = Bitmap.Config.ARGB_4444;
            bob4444 = BitmapFactory.decodeStream(inputStream, null, options);
            inputStream.close();

        } catch (IOException e) {
            // silently ignored, bad coder monkey, baaad!
        } finally {
            // we should really close our input streams here.
        }
    }

    protected void onDraw(Canvas canvas) {
        dst.set(50, 50, 350, 350);
        canvas.drawBitmap(bob565, null, dst, null);
        canvas.drawBitmap(bob4444, 100, 100, null);
        invalidate();
    }
}
</code></pre><h2 id="使用Font文件来改变字体"><a href="#使用Font文件来改变字体" class="headerlink" title="使用Font文件来改变字体"></a>使用Font文件来改变字体</h2><p>主要有两个步骤，一是通过Typeface读入font文件，然后通过setTypeface()方法将Paint设置为新的字体。</p>
<pre><code>class RenderView extends View {
    Paint paint;
    Typeface font;
    Rect bounds = new Rect();

    public RenderView(Context context) {
        super(context);
        paint = new Paint();
        font = Typeface.createFromAsset(context.getAssets(), &quot;font.ttf&quot;);
    }

    protected void onDraw(Canvas canvas) {
        paint.setColor(Color.YELLOW);
        paint.setTypeface(font);
        paint.setTextSize(28);
        paint.setTextAlign(Paint.Align.CENTER);
        canvas.drawText(&quot;This is a test!&quot;, canvas.getWidth() / 2, 100, paint);

        String text = &quot;This is another test o_O&quot;;
        paint.setColor(Color.WHITE);
        paint.setTextSize(18);
        paint.setTextAlign(Paint.Align.LEFT);
        paint.getTextBounds(text, 0, text.length(), bounds);
        canvas.drawText(text, canvas.getWidth() - bounds.width(), 140, paint);
        invalidate();
    }
}
</code></pre><h2 id="SurfaceView的使用"><a href="#SurfaceView的使用" class="headerlink" title="SurfaceView的使用"></a>SurfaceView的使用</h2><p>几乎游戏里都是使用SurfaceView来显示界面。</p>
<pre><code>class FastRenderView extends SurfaceView implements Runnable {
    Thread renderThread = null;
    SurfaceHolder holder;
    volatile boolean running = false;

    public FastRenderView(Context context) {
        super(context);           
        holder = getHolder();            
    }

    public void resume() {          
        running = true;
        renderThread = new Thread(this);
        renderThread.start();         
    }

    public void pause() {        
        running = false;                        
        while(true) {
            try {
                renderThread.join();
                break;
            } catch (InterruptedException e) {
                // retry
            }
        }
        renderThread = null;        
    }

    public void run() {
        while(running) {  
            if(!holder.getSurface().isValid())
                continue;

            Canvas canvas = holder.lockCanvas();            
            drawSurface(canvas);                                           
            holder.unlockCanvasAndPost(canvas);            
        }
    }        

    private void drawSurface(Canvas canvas) {
        canvas.drawRGB(255, 0, 0);
    }
}
</code></pre><p>在onCreate方法中调用就可以简单的使用</p>
<pre><code>FastRenderView renderView = new FastRenderView(this);
setContentView(renderView);
</code></pre>
    

    
</div>


                

                <!-- Post Comments -->
                
                    
                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/2015/08/31/Android官方培训教程/Android官方培训教程8——多媒体音频播放/" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2015/08/30/Android官方培训教程/Android官方培训教程7——Android分享操作/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/touxiang.jpg" alt="柒夜's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        whu_cc@163.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="mailto: whu_cc@163.com" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2016/12/">十二月 2016<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/archives/2016/04/">四月 2016<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/10/">十月 2015<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/09/">九月 2015<span class="sidebar_archives-count">11</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/08/">八月 2015<span class="sidebar_archives-count">14</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/07/">七月 2015<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/06/">六月 2015<span class="sidebar_archives-count">3</span></a></li><li><a class="sidebar_archives-link" href="/archives/2015/05/">五月 2015<span class="sidebar_archives-count">8</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/技术宅/">技术宅<span class="sidebar_archives-count">1</span></a>
            </ul>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Pages  -->
    
        <li>
            <a href="/gallery" title="相册">
                
                    <i class="material-icons sidebar-material-icons">photo</i>
                
                相册
            </a>
        </li>
        
    
        <li>
            <a href="/tags" title="标签云">
                
                    <i class="material-icons sidebar-material-icons">label_outline</i>
                
                标签云
            </a>
        </li>
        
    
        <li>
            <a href="/timeline" title="时间轴">
                
                    <i class="material-icons sidebar-material-icons">timeline</i>
                
                时间轴
            </a>
        </li>
        
            <li class="divider"></li>
        
    
        <li>
            <a href="/links" title="友情链接">
                
                    <i class="material-icons sidebar-material-icons">link</i>
                
                友情链接
            </a>
        </li>
        
    
        <li>
            <a href="/about" title="关于我">
                
                    <i class="material-icons sidebar-material-icons">person</i>
                
                关于我
            </a>
        </li>
        
            <li class="divider"></li>
        
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">47</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->


<!-- Theme Material -->


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    

    <!-- Facebook -->
    

    <!-- Google + -->
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>柒夜
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import File -->


    <script>lsloader.load("js/lazyload.min.js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==")</script>
    <script>lsloader.load("js/js.min.js","/js/js.min.js?oAl/+lvaqTFV31JXTmbrNA==")</script>



    <script>lsloader.load("js/nprogress.js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==")</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>













<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Window Load-->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->

<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Bing Background -->


<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.4.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
